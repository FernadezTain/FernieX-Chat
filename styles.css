/* ═══════════════════════════════════════
   RESET + VARS
═══════════════════════════════════════ */
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
:root{
  --bg:#080c18;
  --bg2:#0c1120;
  --surface:#101828;
  --surface2:#141f30;
  --glass:rgba(255,255,255,.04);
  --glass2:rgba(255,255,255,.08);
  --border:rgba(255,255,255,.07);
  --border2:rgba(255,255,255,.12);
  --accent:#3b7ef6;
  --accent2:#6aa0fb;
  --accent3:#a5c8ff;
  --glow:rgba(59,126,246,.4);
  --text:#eef2ff;
  --text2:#8fa4c8;
  --text3:#3d5070;
  --msg-out-a:#1a45b5;
  --msg-out-b:#3730a3;
  --msg-in:#0f1e33;
  --danger:#f04060;
  --green:#22d472;
  --purple:#8b5cf6;
}
html,body{height:100%;background:var(--bg);font-family:'DM Sans',sans-serif;color:var(--text);overflow:hidden}
input,textarea,button{font-family:'DM Sans',sans-serif}

/* ═══════════════════════════════════════
   AMBIENT BACKGROUND
═══════════════════════════════════════ */
body::before{
  content:'';position:fixed;inset:0;pointer-events:none;z-index:0;
  background:
    radial-gradient(ellipse 90% 70% at 15% -5%,  rgba(59,126,246,.14) 0%, transparent 55%),
    radial-gradient(ellipse 60% 50% at 85% 105%, rgba(139,92,246,.11) 0%, transparent 55%),
    radial-gradient(ellipse 40% 30% at 50% 50%,  rgba(59,126,246,.03) 0%, transparent 70%);
}
body::after{
  content:'';position:fixed;inset:0;pointer-events:none;z-index:0;
  background-image:
    linear-gradient(rgba(255,255,255,.012) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,.012) 1px, transparent 1px);
  background-size:44px 44px;
}

/* ═══════════════════════════════════════
   CSS ICON SYSTEM
═══════════════════════════════════════ */
.ic{display:inline-flex;align-items:center;justify-content:center;flex-shrink:0;position:relative;}
.ic-chat{width:22px;height:22px}
.ic-chat::before{content:'';position:absolute;width:18px;height:14px;background:currentColor;border-radius:5px 5px 5px 1px;top:2px;left:2px;}
.ic-chat::after{content:'';position:absolute;width:5px;height:5px;background:currentColor;clip-path:polygon(0 0,100% 0,0 100%);bottom:2px;left:4px;}
.ic-edit{width:18px;height:18px}
.ic-edit::before{content:'';position:absolute;width:12px;height:12px;border:2px solid currentColor;border-radius:2px;transform:rotate(45deg);top:1px;left:3px;}
.ic-edit::after{content:'';position:absolute;width:5px;height:2px;background:currentColor;bottom:2px;right:1px;}
.ic-search{width:18px;height:18px}
.ic-search::before{content:'';position:absolute;width:11px;height:11px;border:2px solid currentColor;border-radius:50%;top:1px;left:1px;}
.ic-search::after{content:'';position:absolute;width:5px;height:2px;background:currentColor;transform:rotate(45deg);bottom:2px;right:1px;}
.ic-user{width:22px;height:22px}
.ic-user::before{content:'';position:absolute;width:9px;height:9px;background:currentColor;border-radius:50%;top:2px;left:50%;transform:translateX(-50%);}
.ic-user::after{content:'';position:absolute;width:16px;height:8px;background:currentColor;border-radius:8px 8px 0 0;bottom:1px;left:50%;transform:translateX(-50%);}
.ic-back{width:22px;height:22px}
.ic-back::before{content:'';position:absolute;width:10px;height:10px;border-left:2.5px solid currentColor;border-bottom:2.5px solid currentColor;transform:rotate(45deg);top:50%;left:6px;margin-top:-5px;}
.ic-back::after{content:'';position:absolute;width:14px;height:2.5px;background:currentColor;border-radius:2px;top:50%;left:4px;margin-top:-1.25px;}
.ic-link{width:18px;height:18px}
.ic-link::before{content:'';position:absolute;width:8px;height:8px;border:2px solid currentColor;border-radius:50%;top:1px;left:1px;}
.ic-link::after{content:'';position:absolute;width:8px;height:8px;border:2px solid currentColor;border-radius:50%;bottom:1px;right:1px;}
.ic-exit{width:18px;height:18px}
.ic-exit::before{content:'';position:absolute;width:10px;height:14px;border:2px solid currentColor;border-radius:2px;left:1px;top:2px;}
.ic-exit::after{content:'';position:absolute;width:7px;height:2px;background:currentColor;right:1px;top:50%;margin-top:-1px;box-shadow: 3px -3px 0 currentColor, 3px 3px 0 currentColor;}
.ic-send{width:20px;height:20px}
.ic-send::before{content:'';position:absolute;width:0;height:0;border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:14px solid currentColor;top:50%;left:4px;margin-top:-7px;}
.ic-smile{width:20px;height:20px}
.ic-smile::before{content:'';position:absolute;width:16px;height:16px;border:2px solid currentColor;border-radius:50%;top:2px;left:2px;}
.ic-smile::after{content:'';position:absolute;width:8px;height:4px;border-bottom:2px solid currentColor;border-radius:0 0 6px 6px;top:9px;left:6px;box-shadow:-3px -4px 0 0 currentColor,3px -4px 0 0 currentColor;}
.ic-image{width:20px;height:20px}
.ic-image::before{content:'';position:absolute;width:16px;height:13px;border:2px solid currentColor;border-radius:3px;top:3px;left:2px;}
.ic-image::after{content:'';position:absolute;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-bottom:5px solid currentColor;bottom:5px;left:4px;box-shadow: 6px -2px 0 -2px currentColor;}
.ic-eye{width:18px;height:18px}
.ic-eye::before{content:'';position:absolute;width:14px;height:8px;border:2px solid currentColor;border-radius:50%;top:5px;left:2px;}
.ic-eye::after{content:'';position:absolute;width:5px;height:5px;background:currentColor;border-radius:50%;top:50%;left:50%;transform:translate(-50%,-50%);}
.ic-tag{width:18px;height:18px}
.ic-tag::before{content:'';position:absolute;width:12px;height:14px;background:currentColor;clip-path:polygon(0 0,100% 0,100% 80%,50% 100%,0 80%);top:2px;left:3px;}
.ic-trash{width:18px;height:18px}
.ic-trash::before{content:'';position:absolute;width:12px;height:10px;border:2px solid currentColor;border-top:none;border-radius:0 0 3px 3px;bottom:1px;left:3px;}
.ic-trash::after{content:'';position:absolute;width:14px;height:2px;background:currentColor;border-radius:1px;top:4px;left:2px;box-shadow:4px -4px 0 -1px currentColor;}
.ic-lock{width:18px;height:18px}
.ic-lock::before{content:'';position:absolute;width:10px;height:8px;border:2px solid currentColor;border-radius:2px;bottom:1px;left:4px;}
.ic-lock::after{content:'';position:absolute;width:6px;height:6px;border:2px solid currentColor;border-bottom:none;border-radius:4px 4px 0 0;top:2px;left:6px;}
.ic-home{width:22px;height:22px}
.ic-home::before{content:'';position:absolute;width:14px;height:10px;border-left:2px solid currentColor;border-right:2px solid currentColor;border-bottom:2px solid currentColor;border-radius:0 0 3px 3px;bottom:2px;left:4px;}
.ic-home::after{content:'';position:absolute;width:0;height:0;border-left:9px solid transparent;border-right:9px solid transparent;border-bottom:9px solid currentColor;top:3px;left:2px;}
.ic-rocket{width:22px;height:22px}
.ic-rocket::before{content:'';position:absolute;width:10px;height:14px;background:currentColor;clip-path:polygon(50% 0%,100% 70%,50% 100%,0% 70%);top:1px;left:6px;}
.ic-rocket::after{content:'';position:absolute;width:6px;height:4px;background:currentColor;clip-path:polygon(0 0,100% 0,80% 100%,20% 100%);bottom:2px;left:8px;opacity:.7;}
.ic-info{width:18px;height:18px}
.ic-info::before{content:'';position:absolute;width:14px;height:14px;border:2px solid currentColor;border-radius:50%;top:2px;left:2px;}
.ic-info::after{content:'i';position:absolute;font-size:9px;font-weight:700;color:currentColor;font-family:sans-serif;top:50%;left:50%;transform:translate(-50%,-50%);}
.ic-copy{width:18px;height:18px}
.ic-copy::before{content:'';position:absolute;width:10px;height:12px;border:2px solid currentColor;border-radius:2px;bottom:1px;right:1px;}
.ic-copy::after{content:'';position:absolute;width:10px;height:12px;border:2px solid currentColor;border-radius:2px;background:var(--surface);top:1px;left:1px;}
.ic-check{width:18px;height:18px}
.ic-check::before{content:'';position:absolute;width:10px;height:6px;border-left:2.5px solid currentColor;border-bottom:2.5px solid currentColor;transform:rotate(-45deg);top:5px;left:4px;}
.ic-spin{width:20px;height:20px}
.ic-spin::before{content:'';position:absolute;width:16px;height:16px;border:2px solid var(--border2);border-top-color:var(--accent);border-radius:50%;animation:spin .7s linear infinite;top:2px;left:2px;}
@keyframes spin{to{transform:rotate(360deg)}}
.ic-warn{width:20px;height:20px}
.ic-warn::before{content:'';position:absolute;width:0;height:0;border-left:9px solid transparent;border-right:9px solid transparent;border-bottom:16px solid currentColor;top:1px;left:1px;}
.ic-warn::after{content:'!';position:absolute;font-size:8px;font-weight:900;color:var(--bg);font-family:sans-serif;bottom:2px;left:50%;transform:translateX(-50%);}

/* ═══════════════════════════════════════
   SCREENS
═══════════════════════════════════════ */
.screen{position:fixed;inset:0;display:flex;flex-direction:column;z-index:1;transition:transform .4s cubic-bezier(.4,0,.2,1),opacity .35s}
.screen.hidden{transform:translateX(100%);opacity:0;pointer-events:none;z-index:0}

/* ═══════════════════════════════════════
   AUTH SCREEN
═══════════════════════════════════════ */
#auth-screen{background:var(--bg);align-items:center;justify-content:center;padding:24px;overflow-y:auto}
.auth-wrap{width:100%;max-width:380px;animation:authIn .55s cubic-bezier(.4,0,.2,1) both}
@keyframes authIn{from{opacity:0;transform:translateY(28px)}to{opacity:1;transform:translateY(0)}}
.auth-logo{text-align:center;margin-bottom:36px}
.logo-shape{width:80px;height:80px;margin:0 auto 18px;position:relative;}
.logo-shape::before{content:'';position:absolute;inset:-3px;border-radius:26px;background:conic-gradient(from 0deg,#3b7ef6,#8b5cf6,#06b6d4,#3b7ef6);animation:logoSpin 3s linear infinite;filter:blur(2px);}
@keyframes logoSpin{to{transform:rotate(360deg)}}
.logo-box{position:relative;z-index:1;width:80px;height:80px;background:linear-gradient(135deg,#1a3bab,#5b21b6);border-radius:24px;display:flex;align-items:center;justify-content:center;box-shadow:0 0 40px rgba(59,126,246,.5),inset 0 1px 0 rgba(255,255,255,.15);}
.logo-bubble{position:relative;width:42px;height:32px;}
.logo-bubble::before{content:'';position:absolute;width:42px;height:30px;background:#fff;border-radius:8px 8px 8px 2px;top:0;left:0;opacity:.95;}
.logo-bubble::after{content:'';position:absolute;width:0;height:0;border-top:8px solid #fff;border-right:8px solid transparent;bottom:0;left:0;opacity:.95;}
.logo-bubble-dots{position:absolute;top:10px;left:8px;display:flex;gap:5px;z-index:1;}
.logo-bubble-dots span{width:5px;height:5px;background:linear-gradient(135deg,#1a3bab,#5b21b6);border-radius:50%;}
.auth-logo h1{font-family:'Syne',sans-serif;font-size:30px;font-weight:800;letter-spacing:-1px;background:linear-gradient(120deg,#eef2ff,#a5c8ff 60%,#c4b5fd);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.auth-logo p{color:var(--text3);font-size:13px;margin-top:5px;letter-spacing:.5px}
.tab-row{display:flex;background:var(--glass);border:1px solid var(--border);border-radius:16px;padding:4px;margin-bottom:22px;gap:4px}
.tab-btn{flex:1;padding:11px;border:none;background:transparent;color:var(--text2);font-size:13px;font-weight:600;border-radius:12px;cursor:pointer;transition:all .25s}
.tab-btn.active{background:linear-gradient(135deg,var(--accent),#7c3aed);color:#fff;box-shadow:0 4px 16px var(--glow)}
.form-group{margin-bottom:14px}
.form-label{font-size:11px;font-weight:600;color:var(--text3);text-transform:uppercase;letter-spacing:1px;margin-bottom:7px;display:block}
.form-input{width:100%;background:var(--glass);border:1px solid var(--border);border-radius:14px;padding:14px 16px;color:var(--text);font-size:15px;outline:none;-webkit-appearance:none;transition:border-color .2s,box-shadow .2s,background .2s;}
.form-input:focus{border-color:rgba(59,126,246,.6);background:var(--glass2);box-shadow:0 0 0 3px rgba(59,126,246,.12)}
.form-input::placeholder{color:var(--text3)}
.input-wrap{position:relative}
.input-eye{position:absolute;right:12px;top:50%;transform:translateY(-50%);cursor:pointer;color:var(--text3);transition:color .2s;display:flex;align-items:center;}
.input-eye:hover{color:var(--text2)}
.auth-btn{width:100%;background:linear-gradient(135deg,#2256eb,#6d28d9);border:none;border-radius:14px;padding:15px;color:#fff;font-size:15px;font-weight:600;cursor:pointer;margin-top:8px;letter-spacing:.3px;box-shadow:0 4px 20px var(--glow),inset 0 1px 0 rgba(255,255,255,.12);transition:transform .15s,box-shadow .15s,opacity .2s;position:relative;overflow:hidden;}
.auth-btn::after{content:'';position:absolute;inset:0;background:linear-gradient(135deg,rgba(255,255,255,.08),transparent);opacity:0;transition:opacity .2s}
.auth-btn:hover::after{opacity:1}
.auth-btn:active{transform:scale(.98)}
.auth-error{background:rgba(240,64,96,.1);border:1px solid rgba(240,64,96,.25);border-radius:12px;padding:10px 14px;color:#fca5a5;font-size:13px;margin-bottom:14px;display:none;}
.auth-error.show{display:block;animation:shake .35s ease}
@keyframes shake{0%,100%{transform:translateX(0)}25%,75%{transform:translateX(-4px)}50%{transform:translateX(4px)}}

/* ═══════════════════════════════════════
   MAIN SCREEN
═══════════════════════════════════════ */
#main-screen{background:var(--bg)}
.app-header{background:rgba(8,12,24,.88);backdrop-filter:blur(24px);-webkit-backdrop-filter:blur(24px);display:flex;align-items:center;padding:13px 16px;padding-top:max(13px,env(safe-area-inset-top));gap:12px;border-bottom:1px solid var(--border);flex-shrink:0;z-index:5;}
.app-header h2{font-family:'Syne',sans-serif;font-size:20px;font-weight:800;flex:1;letter-spacing:-.5px;background:linear-gradient(90deg,#eef2ff,#a5c8ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.header-btn{width:38px;height:38px;background:var(--glass);border:1px solid var(--border);border-radius:12px;color:var(--text2);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background .2s,color .2s,transform .15s;}
.header-btn:active{background:var(--glass2);transform:scale(.9)}
.avatar{border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;color:#fff;flex-shrink:0;font-family:'Syne',sans-serif;text-transform:uppercase;box-shadow:0 0 0 2px rgba(59,126,246,.3);}
.search-bar{padding:10px 16px;flex-shrink:0}
.search-input-wrap{position:relative}
.search-input{width:100%;background:var(--glass);border:1px solid var(--border);border-radius:14px;padding:11px 16px 11px 44px;color:var(--text);font-size:14px;outline:none;transition:border-color .2s,background .2s;}
.search-input:focus{border-color:rgba(59,126,246,.4);background:var(--glass2)}
.search-input::placeholder{color:var(--text3)}
.search-ic-wrap{position:absolute;left:14px;top:50%;transform:translateY(-50%);color:var(--text3)}
.chats-list{flex:1;overflow-y:auto;overscroll-behavior:contain}
.chats-list::-webkit-scrollbar{width:2px}
.chats-list::-webkit-scrollbar-thumb{background:var(--border2);border-radius:2px}
.chat-item{display:flex;align-items:center;gap:13px;padding:11px 16px;cursor:pointer;transition:background .15s;position:relative;animation:itemIn .3s cubic-bezier(.4,0,.2,1) both;}
@keyframes itemIn{from{opacity:0;transform:translateX(-8px)}to{opacity:1;transform:translateX(0)}}
.chat-item::after{content:'';position:absolute;bottom:0;left:70px;right:16px;height:1px;background:var(--border)}
.chat-item:active{background:rgba(255,255,255,.03)}
.chat-item-info{flex:1;min-width:0}
.chat-item-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:3px}
.chat-item-name{font-size:15px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:'Syne',sans-serif}
.chat-item-time{font-size:11px;color:var(--text3);flex-shrink:0;letter-spacing:.2px}
.chat-item-preview{font-size:13px;color:var(--text2);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.chat-item-badge{background:linear-gradient(135deg,var(--accent),#7c3aed);color:#fff;border-radius:10px;font-size:10px;font-weight:700;padding:2px 7px;flex-shrink:0}
.empty-state{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;text-align:center}
.empty-illo{width:72px;height:72px;margin:0 auto 20px;position:relative;opacity:.35;}
.empty-illo::before{content:'';position:absolute;width:60px;height:48px;background:var(--text3);border-radius:10px 10px 10px 3px;top:0;left:6px;}
.empty-illo::after{content:'';position:absolute;width:0;height:0;border-top:12px solid var(--text3);border-right:12px solid transparent;bottom:6px;left:6px;}
.empty-state h3{font-size:16px;font-weight:700;margin-bottom:8px;color:var(--text2);font-family:'Syne',sans-serif}
.empty-state p{font-size:13px;line-height:1.7;color:var(--text3)}
.bottom-nav{background:rgba(8,12,24,.92);backdrop-filter:blur(24px);-webkit-backdrop-filter:blur(24px);border-top:1px solid var(--border);display:flex;padding-bottom:max(10px,env(safe-area-inset-bottom));flex-shrink:0;z-index:5;}
.nav-item{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:10px 8px 6px;cursor:pointer;color:var(--text3);font-size:10px;font-weight:600;gap:5px;transition:color .25s;letter-spacing:.5px;text-transform:uppercase;}
.nav-item.active{color:var(--accent2)}
.nav-item .ic{transition:transform .2s}
.nav-item.active .ic{transform:scale(1.1)}

/* ═══════════════════════════════════════
   MODAL
═══════════════════════════════════════ */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.75);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);z-index:200;display:flex;align-items:flex-end;opacity:0;pointer-events:none;transition:opacity .3s;}
.modal-overlay.open{opacity:1;pointer-events:all}
.modal-sheet{background:var(--surface);border:1px solid var(--border);border-radius:28px 28px 0 0;padding:24px;width:100%;max-height:90vh;overflow-y:auto;transform:translateY(100%);transition:transform .35s cubic-bezier(.4,0,.2,1);box-shadow:0 -24px 60px rgba(0,0,0,.7);}
.modal-overlay.open .modal-sheet{transform:translateY(0)}
.modal-handle{width:36px;height:4px;background:var(--border2);border-radius:2px;margin:0 auto 22px}
.modal-title{font-family:'Syne',sans-serif;font-size:20px;font-weight:800;margin-bottom:20px;text-align:center;background:linear-gradient(90deg,#eef2ff,#a5c8ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.room-option{background:var(--glass);border:1px solid var(--border);border-radius:18px;padding:16px;margin-bottom:10px;cursor:pointer;transition:border-color .2s,background .2s,transform .15s;display:flex;align-items:center;gap:16px;}
.room-option:active{transform:scale(.98);background:var(--glass2)}
.room-option-icon-wrap{width:48px;height:48px;background:var(--surface2);border-radius:14px;display:flex;align-items:center;justify-content:center;flex-shrink:0;color:var(--accent2);}
.room-option-info h3{font-size:15px;font-weight:600;font-family:'Syne',sans-serif}
.room-option-info p{font-size:12px;color:var(--text2);margin-top:3px}
.code-display{background:var(--bg2);border:1.5px dashed rgba(59,126,246,.4);border-radius:18px;padding:22px;text-align:center;margin:16px 0;cursor:pointer;transition:border-color .2s,background .2s;position:relative;overflow:hidden;}
.code-display::before{content:'';position:absolute;inset:0;background:radial-gradient(circle at 50% 50%,rgba(59,126,246,.05),transparent 70%)}
.code-display:active{background:var(--glass)}
.code-display .code-label{font-size:11px;color:var(--text3);margin-bottom:10px;text-transform:uppercase;letter-spacing:1px;display:flex;align-items:center;justify-content:center;gap:8px}
.code-display .code-val{font-family:'Syne',sans-serif;font-size:34px;font-weight:800;letter-spacing:8px;background:linear-gradient(135deg,#60a5fa,#a78bfa);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.code-display .code-hint{font-size:12px;color:var(--text3);margin-top:8px}
.modal-btn{width:100%;background:linear-gradient(135deg,var(--accent),#7c3aed);border:none;border-radius:14px;padding:15px;color:#fff;font-size:15px;font-weight:600;cursor:pointer;margin-top:10px;transition:opacity .2s,transform .15s;box-shadow:0 4px 20px var(--glow);letter-spacing:.3px;}
.modal-btn:active{opacity:.85;transform:scale(.98)}
.modal-btn.outline{background:transparent;border:1px solid var(--border2);color:var(--text2);box-shadow:none}
.modal-btn.outline:active{background:var(--glass)}
.modal-btn.danger{background:linear-gradient(135deg,#dc2626,#9f1239)}
.modal-btn.green{background:linear-gradient(135deg,#15803d,#0d9488)}
.connecting-state{text-align:center;padding:24px;color:var(--text2);font-size:14px;display:flex;flex-direction:column;align-items:center}
.css-spinner{width:36px;height:36px;border:2.5px solid var(--border);border-top-color:var(--accent);border-radius:50%;animation:spin .7s linear infinite;margin-bottom:14px;}

/* ═══════════════════════════════════════
   CHAT SCREEN
═══════════════════════════════════════ */
#chat-screen{background:var(--bg)}
.chat-header{background:rgba(8,12,24,.92);backdrop-filter:blur(24px);-webkit-backdrop-filter:blur(24px);display:flex;align-items:center;padding:10px 14px;padding-top:max(10px,env(safe-area-inset-top));gap:10px;border-bottom:1px solid var(--border);flex-shrink:0;z-index:5;}
.chat-header-back{cursor:pointer;color:var(--accent2);display:flex;align-items:center;justify-content:center;padding:6px;border-radius:10px;transition:background .15s,transform .15s;}
.chat-header-back:active{background:var(--glass2);transform:translateX(-2px)}
.chat-header-info{flex:1;min-width:0}
.chat-header-name{font-size:16px;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:'Syne',sans-serif}
.chat-header-status{font-size:11px;color:var(--accent2);font-weight:500;letter-spacing:.3px;margin-top:2px;display:flex;align-items:center;gap:5px}
.status-dot-live{width:6px;height:6px;background:var(--green);border-radius:50%;animation:pulseDot 2s infinite}
@keyframes pulseDot{0%,100%{box-shadow:0 0 0 0 rgba(34,212,114,.5)}50%{box-shadow:0 0 0 4px rgba(34,212,114,0)}}
.chat-header-actions{display:flex;gap:6px}
.chat-bg{flex:1;overflow-y:auto;padding:14px 12px;overscroll-behavior:contain;display:flex;flex-direction:column;gap:6px;background:radial-gradient(ellipse 70% 50% at 5% 20%,rgba(59,126,246,.05) 0%,transparent 50%),radial-gradient(ellipse 50% 40% at 95% 80%,rgba(139,92,246,.04) 0%,transparent 50%),var(--bg);}
.chat-bg::-webkit-scrollbar{width:2px}
.chat-bg::-webkit-scrollbar-thumb{background:var(--border2);border-radius:2px}
.msg-wrap{display:flex;flex-direction:column;max-width:78%;animation:msgIn .22s cubic-bezier(.4,0,.2,1) both}
@keyframes msgIn{from{opacity:0;transform:translateY(8px) scale(.97)}to{opacity:1;transform:none}}
.msg-wrap.out{align-self:flex-end;align-items:flex-end}
.msg-wrap.in{align-self:flex-start;align-items:flex-start}
.msg-sender-name{font-size:11px;font-weight:600;color:var(--accent3);margin-bottom:4px;padding:0 4px;letter-spacing:.3px}
.msg-bubble{padding:10px 14px;border-radius:18px;font-size:14px;line-height:1.6;word-break:break-word;}
.msg-wrap.out .msg-bubble{background:linear-gradient(135deg,var(--msg-out-a),var(--msg-out-b));border-bottom-right-radius:5px;box-shadow:0 4px 18px rgba(26,69,181,.35);}
.msg-wrap.in .msg-bubble{background:var(--msg-in);border:1px solid var(--border);border-bottom-left-radius:5px;}
.msg-photo{max-width:240px;max-height:300px;border-radius:14px;display:block;object-fit:cover;cursor:pointer;border:1px solid var(--border);transition:transform .15s,opacity .2s;}
.msg-photo:active{transform:scale(.98)}
.msg-wrap.out .msg-photo{border-radius:14px 14px 5px 14px}
.msg-wrap.in .msg-photo{border-radius:14px 14px 14px 5px}
.lightbox{position:fixed;inset:0;background:rgba(0,0,0,.92);z-index:500;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .25s;}
.lightbox.open{opacity:1;pointer-events:all}
.lightbox img{max-width:95vw;max-height:90vh;border-radius:10px;object-fit:contain}
.lightbox-close{position:absolute;top:16px;right:16px;width:36px;height:36px;background:rgba(255,255,255,.12);border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#fff;border:1px solid rgba(255,255,255,.2);font-size:20px;line-height:1;transition:background .2s;}
.lightbox-close:active{background:rgba(255,255,255,.22)}
.photo-preview{display:none;padding:8px 12px 0;background:rgba(8,12,24,.92);}
.photo-preview.show{display:flex;gap:8px;align-items:flex-end}
.photo-preview-img{width:60px;height:60px;object-fit:cover;border-radius:10px;border:1px solid var(--border);}
.photo-preview-remove{width:22px;height:22px;background:rgba(240,64,96,.8);border:none;border-radius:50%;cursor:pointer;color:#fff;font-size:12px;line-height:1;display:flex;align-items:center;justify-content:center;margin-left:-16px;margin-bottom:0;align-self:flex-start;flex-shrink:0;position:relative;top:-6px;}
.msg-meta{display:flex;align-items:center;gap:5px;margin-top:4px;padding:0 4px}
.msg-time{font-size:10px;color:var(--text3);letter-spacing:.2px}
.msg-checks{display:flex;gap:1px;align-items:center}
.msg-checks span{width:8px;height:5px;border-bottom:2px solid var(--accent3);border-right:none;border-left:2px solid var(--accent3);transform:rotate(-45deg);display:block;}
.typing-bubble{align-self:flex-start;background:var(--msg-in);border:1px solid var(--border);border-radius:18px;border-bottom-left-radius:5px;padding:12px 16px;display:none;gap:5px;align-items:center;}
.typing-bubble.show{display:flex;animation:msgIn .2s ease both}
.td{width:6px;height:6px;background:var(--text3);border-radius:50%;animation:bounce 1.2s infinite}
.td:nth-child(2){animation-delay:.15s}
.td:nth-child(3){animation-delay:.3s}
@keyframes bounce{0%,60%,100%{transform:translateY(0)}30%{transform:translateY(-6px)}}
.sys-msg{text-align:center;margin:10px 0}
.sys-msg span{background:rgba(255,255,255,.04);color:var(--text3);font-size:11px;padding:5px 14px;border-radius:20px;border:1px solid var(--border);backdrop-filter:blur(4px);letter-spacing:.3px;display:inline-flex;align-items:center;gap:6px;}
.chat-input-area{background:rgba(8,12,24,.92);backdrop-filter:blur(24px);-webkit-backdrop-filter:blur(24px);border-top:1px solid var(--border);padding:10px 12px;padding-bottom:max(10px,env(safe-area-inset-bottom));display:flex;gap:8px;align-items:flex-end;flex-shrink:0;}
.msg-input-wrap{flex:1;background:var(--glass);border:1px solid var(--border);border-radius:22px;display:flex;align-items:flex-end;padding:0 10px;transition:border-color .2s,box-shadow .2s;}
.msg-input-wrap:focus-within{border-color:rgba(59,126,246,.5);box-shadow:0 0 0 3px rgba(59,126,246,.1)}
#msg-textarea{flex:1;background:transparent;border:none;color:var(--text);font-size:15px;outline:none;padding:12px 0;resize:none;max-height:120px;line-height:1.4;}
#msg-textarea::placeholder{color:var(--text3)}
.input-action-btn{background:none;border:none;color:var(--text3);padding:8px 4px;cursor:pointer;display:flex;align-items:center;transition:color .2s,transform .15s;}
.input-action-btn:active{transform:scale(.88)}
.input-action-btn:hover{color:var(--text2)}
.send-btn{width:46px;height:46px;background:linear-gradient(135deg,#2256eb,#6d28d9);border:none;border-radius:15px;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:transform .15s,box-shadow .2s,opacity .2s;flex-shrink:0;box-shadow:0 4px 16px var(--glow);}
.send-btn:active{transform:scale(.9)}
.send-btn:disabled{opacity:.3;background:var(--surface2);box-shadow:none}
#photo-input{display:none}

/* ═══════════════════════════════════════
   PROFILE SCREEN
═══════════════════════════════════════ */
#profile-screen{background:var(--bg)}
.profile-back-btn{position:absolute;top:max(16px,env(safe-area-inset-top));left:16px;width:40px;height:40px;background:rgba(255,255,255,.1);backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.14);border-radius:13px;display:flex;align-items:center;justify-content:center;color:#fff;cursor:pointer;z-index:10;transition:background .2s,transform .15s;}
.profile-back-btn:active{background:rgba(255,255,255,.18);transform:scale(.93)}
.profile-hero{position:relative;overflow:hidden;background:linear-gradient(160deg,#0e1e3c 0%,#1a1035 55%,#080c18 100%);padding:60px 24px 32px;text-align:center;padding-top:max(60px,calc(env(safe-area-inset-top)+46px));}
.profile-hero::before{content:'';position:absolute;inset:0;background:radial-gradient(circle 200px at 30% 40%,rgba(59,126,246,.22),transparent),radial-gradient(circle 150px at 70% 70%,rgba(139,92,246,.17),transparent);}
.profile-hero::after{content:'';position:absolute;inset:0;background-image:linear-gradient(rgba(255,255,255,.018) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,.018) 1px,transparent 1px);background-size:28px 28px;}
.profile-avatar-big{position:relative;z-index:1;width:90px;height:90px;border-radius:50%;font-size:34px;display:flex;align-items:center;justify-content:center;margin:0 auto 14px;font-family:'Syne',sans-serif;font-weight:800;border:2px solid rgba(255,255,255,.14);box-shadow:0 0 0 4px rgba(59,126,246,.25),0 8px 32px rgba(0,0,0,.5);}
.profile-name{position:relative;z-index:1;font-family:'Syne',sans-serif;font-size:22px;font-weight:800;letter-spacing:-.5px}
.profile-username{position:relative;z-index:1;color:var(--text3);font-size:13px;margin-top:4px;letter-spacing:.5px}
.profile-body{padding:20px 16px;overflow-y:auto;flex:1}
.profile-section{background:var(--glass);border:1px solid var(--border);border-radius:18px;margin-bottom:12px;overflow:hidden}
.profile-row{display:flex;align-items:center;gap:14px;padding:15px 16px;border-bottom:1px solid var(--border);cursor:pointer;transition:background .15s;}
.profile-row:last-child{border:none}
.profile-row:active{background:var(--glass2)}
.profile-row-icon{width:34px;height:34px;background:var(--surface2);border-radius:10px;display:flex;align-items:center;justify-content:center;flex-shrink:0;color:var(--text2);}
.profile-row-info{flex:1}
.profile-row-label{font-size:11px;color:var(--text3);margin-bottom:2px;letter-spacing:.5px;text-transform:uppercase}
.profile-row-value{font-size:14px;font-weight:600}
.emoji-picker{position:absolute;bottom:68px;left:0;right:0;background:rgba(14,20,36,.97);backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);border-top:1px solid var(--border);padding:12px;display:none;flex-wrap:wrap;gap:3px;z-index:50;max-height:185px;overflow-y:auto;}
.emoji-picker.open{display:flex;animation:slideUp .2s ease}
@keyframes slideUp{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
.emoji-btn-pick{background:none;border:none;font-size:22px;cursor:pointer;padding:5px;border-radius:10px;transition:background .12s,transform .12s}
.emoji-btn-pick:active{background:var(--glass2);transform:scale(.88)}
.toast{position:fixed;bottom:90px;left:50%;transform:translateX(-50%) translateY(14px);background:rgba(14,20,36,.96);backdrop-filter:blur(16px);color:#fff;padding:10px 20px;border-radius:20px;font-size:13px;font-weight:500;z-index:999;opacity:0;transition:opacity .25s,transform .25s;pointer-events:none;white-space:nowrap;border:1px solid var(--border2);box-shadow:0 8px 24px rgba(0,0,0,.5);}
.toast.show{opacity:1;transform:translateX(-50%) translateY(0)}

/* Upload progress indicator */
.upload-progress{
  display:none;padding:6px 12px;background:rgba(8,12,24,.92);
  align-items:center;gap:10px;font-size:12px;color:var(--text2);
}
.upload-progress.show{display:flex}
.upload-bar-wrap{flex:1;height:3px;background:var(--border);border-radius:2px;overflow:hidden}
.upload-bar{height:100%;background:linear-gradient(90deg,var(--accent),#7c3aed);border-radius:2px;width:0%;transition:width .15s}
